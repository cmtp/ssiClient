<ssi-header></ssi-header>
<div class="container"
     fxLayoutGap="10px">
  <div fxFlex="100%">
    <h1 *ngIf="!isUpdate">Crear Incidente</h1>
    <h1 *ngIf="isUpdate">Editar Incidente</h1>
  </div>
  <div fxFlex>
    <button mat-button routerLink="/incidents" color="accent">Atras</button>
    <button mat-button routerLink="/incidents/report" color="accent">Reportes</button>
  </div>
  <mat-card>
    <form [formGroup]="incidentForm" (ngSubmit)="saveData()" id="form">
    <mat-card-content>
      <div fxFlex="100%" fxLayout="row" fxLayoutGap="10px">
        <mat-form-field fxFlex="50%">
          <input matInput name="code" formControlName="code" placeholder="Code">
        </mat-form-field>
        <mat-form-field fxFlex="50%">
          <mat-select placeholder="Select Type" formControlName="type">
            <mat-option *ngFor="let type of types" [value]="type">
              {{ type }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div fxFlex fxLayout="row">
        <mat-form-field fxFlex="50%">
          <mat-select placeholder="Selecciona un estado" formControlName="status">
            <mat-option *ngFor="let status of statusList" [value]="status">
              {{ status }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field fxFlex="50%">
          <mat-select placeholder="Selecciona un Area" formControlName="area">
            <mat-option *ngFor="let area of areas" [value]="area.name">
              {{ area.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div fxFlex fxLayout="row">
        <mat-form-field fxFlex="50%">
          <mat-select placeholder="Reportado por:" formControlName="reportedBy">
            <mat-option *ngFor="let personal of personalList" [value]="personal.firstname">
              {{ personal.firstname }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <div fxFlex="50%" fxLayout="row" fxLayoutGap="10px">
          <mat-checkbox name="reincident" formControlName="reincident" fxFlex="50%">Reincident</mat-checkbox>
          <mat-checkbox name="treatment" formControlName="treatment" fxFlex="50%">Treatment</mat-checkbox>
        </div>
      </div>
      <div fxFlex="100%" fxLayout="row">
        <mat-form-field fxFlex="100%">
          <textarea matInput formControlName="description" placeholder="Description" rows="6"></textarea>
        </mat-form-field>
      </div>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button (click)="cancelForm()" type="button">Cancelar</button>
      <button class="mat-background-primary" mat-raised-button
              [disabled]="incidentForm.invalid" type="submit" color="primary">Guardar</button>
    </mat-card-actions>
    </form>
  </mat-card>
</div>
<ssi-footer></ssi-footer>
